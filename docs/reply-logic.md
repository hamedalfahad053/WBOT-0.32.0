[![](https://mermaid.ink/img/pako:eNplVE1z4jAM_SuaXHpp-QEcdmcL_aTQFmg7O6EHkyjgIbEzjrOUgf73lW0FEtoDUz89PT1LcvZRolOM-tHKiHIN8-FCAf39iQusKrFCMJig_IfpJ4TI9f6hAmlBwMrougTm_f4O4cFeUri6c7EplvkOrKkRpIJEq0yuGt4wzvWqD1utLiykGoTa2bVUK1hiIuoKuxqkqbPsM6TehNTG2LkTZt06I3aNoOpiicY5WOY62eSyso2Ju6A0YUblSdpeVIEKjtuDrcxzZ1Fp75D177kPBaZSnHfhwRVP9VblWqRjzwjXB60azmM8ZIK36XVYexR8dQVCD3pcMJM5Bmdki5p2JNOkgsiTn4QblMUve-5wHEq8qY2ixCYKdle2Rh6ok6MQfomElIRN1o3Oc2z8hEQFJfUw3LIHMoOizq0syaXnox-GggpV2gqFsr7xXodLvhxLlsJYKfJu0VcXVnrsMMCitLsmMo3HwmyO1yFXBkVzkVm4c5PoNWj5MJMK0x58nO8ip81jXmTtB0XLaZrrshQT33jlDBWGRJRWnqb9TtN28tytboWPeCBokltcrrXeEMiPEK6ufsE1vzt3OPzF6gA3_A58eMDvzh8OE32AYQfxGbctjUBi5LZFuutAjnTPq94iPXQgR3rilT-RHjsIcUa8kaekcQfxyhPethM07SCU9sLb8YMy9chzJ0z8V16XU915B3EKM57dTyePHnrrxEnjnRffAx883fZh3j7M2odRoxiO7je6jAo0hZApfYP3DllEtEIFLqI-_UvLKeixLKKF-iZqXabC4k0qrTZRPxN5hZeRqK2e7VQS9d2ntiENpaBPesGs7__Pu9jg)](https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNplVE1z4jAM_SuaXHpp-QEcdmcL_aTQFmg7O6EHkyjgIbEzjrOUgf73lW0FEtoDUz89PT1LcvZRolOM-tHKiHIN8-FCAf39iQusKrFCMJig_IfpJ4TI9f6hAmlBwMrougTm_f4O4cFeUri6c7EplvkOrKkRpIJEq0yuGt4wzvWqD1utLiykGoTa2bVUK1hiIuoKuxqkqbPsM6TehNTG2LkTZt06I3aNoOpiicY5WOY62eSyso2Ju6A0YUblSdpeVIEKjtuDrcxzZ1Fp75D177kPBaZSnHfhwRVP9VblWqRjzwjXB60azmM8ZIK36XVYexR8dQVCD3pcMJM5Bmdki5p2JNOkgsiTn4QblMUve-5wHEq8qY2ixCYKdle2Rh6ok6MQfomElIRN1o3Oc2z8hEQFJfUw3LIHMoOizq0syaXnox-GggpV2gqFsr7xXodLvhxLlsJYKfJu0VcXVnrsMMCitLsmMo3HwmyO1yFXBkVzkVm4c5PoNWj5MJMK0x58nO8ip81jXmTtB0XLaZrrshQT33jlDBWGRJRWnqb9TtN28tytboWPeCBokltcrrXeEMiPEK6ufsE1vzt3OPzF6gA3_A58eMDvzh8OE32AYQfxGbctjUBi5LZFuutAjnTPq94iPXQgR3rilT-RHjsIcUa8kaekcQfxyhPethM07SCU9sLb8YMy9chzJ0z8V16XU915B3EKM57dTyePHnrrxEnjnRffAx883fZh3j7M2odRoxiO7je6jAo0hZApfYP3DllEtEIFLqI-_UvLKeixLKKF-iZqXabC4k0qrTZRPxN5hZeRqK2e7VQS9d2ntiENpaBPesGs7__Pu9jg)

## Test scnarios

- User-to-user text message with exact match 
- User-to-user text message with partial match 
- User-to-user text message with no match 
- User-to-group text message with exact match 
- User-to-group text message with partial match 
- User-to-group text message with no match 
- User-to-user media message (with caption) with exact match 
- User-to-user media message (with caption) with partial match 
- User-to-user media message (with caption) with no match 
- User-to-group media message (with caption) with exact match 
- User-to-group media message (with caption) with partial match 
- User-to-group media message (with caption) with no match 

